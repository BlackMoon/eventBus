<app-login (closed)="loginComponent_Closed($event)"></app-login>
<div id="pm-dashboard">
    <!-- START PM NAVIGATION PANEL -->
    <div id="pm-navigation" class="collapsed navigation-slide">
        <div class="expand-container">
            <a href="#" class="btn-expand" (click)="toggleNavBar($event)" touchstart="toggleNavBar($event)">
                <i class="icon-md icon-menu">Expand Navigation</i>
            </a>
        </div>        
        <div class="profile table">
            <div class="userinfo row">
                <span class="picture cell valign-mid">
                    <img src="images/logo.png" class="img-circle" alt="EventBus" />
                </span>                
                <span class="user cell valign-mid hidden-closed">
                    EventBus
                    <small class="discipline">1.0.0.0</small>
                </span>
            </div>            
            <div class="date today row-group">
                <span class="cell">Диспетчер</span>   
                <div class="row">
                    <span class="cell">событий</span>
                </div>             
            </div>
        </div>     
        <section class="projects current" *ngIf="menu.length > 0">
            <ul>
                <li id="menu-{{mi.id}}" [ngClass]="{ active: mi.active, table: true }" *ngFor="let mi of menu" (click)="menuItemClick(mi)">
                    <h3 *ngIf="mi.title">{{mi.title}}</h3>
                    <div class="essentials cell valign-mid">
                        <div class="doughnut">
                            <i class="{{mi.iconCls}}" *ngIf="mi.iconCls"></i>
                        </div>
                        <span class="client abbr">{{mi.abbr}}</span>
                    </div>
                    <div class="details cell valign-mid hidden-closed">
                        <span class="client full">{{mi.name}}</span>
                        <span class="projectID"></span>
                    </div>
                    <div class="details-btn cell valign-mid hidden-closed" *ngIf="mi.details">
                        <i class="{{mi.details.iconCls}}" title="{{mi.details.title}}"></i>    
                    </div>
                </li>
            </ul>
        </section>
        <!-- START LOGIN PANEL -->
        <section class="projects current" *ngIf="!this.authService.isAuthenticated">
            <ul>
                <li class="table" (click)="login()">
                    <div class="essentials cell valign-mid">
                        <div class="doughnut">
                            <i class="icon-md icon-add-team"></i>
                        </div>
                        <span class="client abbr">Войти</span>
                    </div>
                    <div class="details cell valign-mid hidden-closed">
                        <span class="client full">Войти в систему</span>
                        <span class="projectID"></span>
                    </div>
                    <div class="details-btn cell valign-mid hidden-closed">
                    </div>
                </li>
            </ul>
        </section>
        <section class="projects upcoming" *ngIf="this.authService.isAuthenticated">
            <ul>
                <li class="table" [ngStyle]="{'cursor': 'default'}">
                    <div class="essentials cell valign-mid">
                        <div class="doughnut">Вошел как</div>
                        <span class="client abbr">{{loggedUser.username | uppercase }}</span>
                    </div>
                    <div class="details cell valign-mid hidden-closed">
                        <span class="client full">{{loggedUser.description || loggedUser.username}}</span>
                        <span class="projectID">{{ loggedUser.isadmin ? 'Администратор' : 'Пользователь' }}</span>
                    </div>
                    <div class="details-btn cell valign-mid hidden-closed" (click)="logout()" [ngStyle]="{'cursor': 'pointer'}">
                        <i class="icon-md icon-remove" title="Выйти"></i>
                    </div>
                </li>
            </ul>
        </section>
        <!-- END LOGIN PANEL -->
    </div>
    <!-- END PM NAVIGATION PANEL -->
    <!-- START PROJECT PANEL -->
    <div id="project-panel" class="content">
        <div id="headline">            
            <h1>projectplanner</h1>            
            <a href="#" class="action slide-team-directory">
                <span class="icon-md icon-approve"></span>
            </a>
        </div>    

        <section id="details" class="table">
            <h2>Project Details</h2>
            <div id="planned-budget" class="cell alert visible-lg visible-md visible-sm">
                <span class="label">@Resources.Main.Details_BaselineBudget</span>
                <span data-bind="text: budget_format(budget)" class="result">0.00</span>
            </div>
            <div id="projected-budget" data-bind="css: {'warning': (status() === 'warning'), 'danger': status() === 'danger', 'success': (status() === 'ok' && budget_projected() < budget())}" class="cell alert">
                <span class="label">@Resources.Main.Details_ProjectedBudget</span>
                <span data-bind="text: budget_projected_format(budget_projected)" class="result">0.00</span>
            </div>
            <div id="planned-hours-worked" class="cell alert">
                <span class="label">@Resources.Main.Details_HoursPlanned</span>
                <span class="result"><span data-bind="text: hours_worked" class="completed">--</span>/<span data-bind="text: hours_planned" class="scheduled">--</span> <span data-bind="text: hrsCompletePercent" class="percent">(--%)</span></span>
            </div>
            <div id="planned-tasks" class="cell alert">
                <span class="label">@Resources.Main.Details_TaskProgress</span>
                <span class="result"><span data-bind="text: tasks_complete" class="completed">--</span>/<span data-bind="text: tasks_total" class="scheduled">--</span> <span data-bind="text: tasksCompletePercent" class="percent">(--%)</span></span>
            </div>
            <div id="planned-end-date" class="cell alert visible-lg visible-md visible-sm">
                <span class="label">@Resources.Main.Details_PlannedEndDate</span>
                <span data-bind="text: end_date_format" class="result">--/--/----</span>
            </div>
            <div id="projected-end-date" data-bind="css: {'warning': (status() === 'warning'), 'danger': status() === 'danger', 'success': (status() === 'ok' && projected_end_date() < end_date())}" class="cell alert">
                <span class="label">@Resources.Main.Details_ProjectedEndDate</span>
                <span data-bind="text: projected_end_date_format" class="result">--/--/----</span>
            </div>
        </section>
        <router-outlet></router-outlet>            
        
    </div>
    <!-- END PROJECT PANEL -->       
</div>